"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Abbreviation=function(){function e(t){_classCallCheck(this,e),this._config=Object.assign({upper:!0,tags:["strong"],class:["abbr"]},t)}return _createClass(e,[{key:"_abbreviation",value:function(e){return new(function(){function e(t){if(_classCallCheck(this,e),t instanceof Array||"string"==typeof t)this.set(t);else if(void 0!==t)throw new Error("parameter must be an Array or String or DOM.")}return _createClass(e,[{key:"set",value:function(e){if(e instanceof Array)this.letters=e,this.abbr=e.join("");else{if("string"!=typeof e)throw new Error("parameter must be an Array or String.");this.letters=e.split(""),this.abbr=e}return this}},{key:"export",value:function(){return this.exportWithSentence()}},{key:"exportWithSentence",value:function(e){return{sentence:e||"",letters:this.letters||[],abbr:this.abbr||""}}}]),e}())(e)}},{key:"from",value:function(e){if("string"==typeof e)return this.getAbbreviationFromText(e);if(e instanceof HTMLElement)return this.getAbbreviationFromDOM(e);throw new Error("parameter must be an DOM or String.")}},{key:"getAbbreviationFromText",value:function(e){if(!this._config.upper)return this._abbreviation().export();var t=e.split("").filter(function(e){return/[A-Z]/.test(e)});return new this._abbreviation(t).exportWithSentence(e)}},{key:"getAbbreviationFromDOM",value:function(e){e=e.cloneNode(!0),e.querySelectorAll("script").forEach(function(e){e.parentNode.removeChild(e)});var t=(e.textContent||e.innerText).replace(/(\r\n|\n|\r)/gm,""),r=(this._config.tags||[]).concat((this._config.class||[]).map(function(e){return"."+e})),n=[],i=r.length>0?Array.from(e.querySelectorAll(r.join(","))):[];if(this._config.upper){var o=String.fromCharCode(1114112),a=[];i.forEach(function(e){e.innerText=e.innerText.toUpperCase(),/[A-Z]/.test(e.innerText)||(a.push(e.innerText),e.innerText=o)});var s=0;n=(e.textContent||e.innerText).replace(/(\r\n|\n|\r)/gm,"").split("").map(function(e){return e===o?a[s++]:/[A-Z]/.test(e)?e:null}).filter(function(e){return null!==e})}else n=i.map(function(e){var t=e.innerText;if(1===t.length)return t}).filter(function(e){return null!==e});return new this._abbreviation(n).exportWithSentence(t)}}]),e}();
